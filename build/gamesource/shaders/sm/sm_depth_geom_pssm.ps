
/*
sm_depth_geom_pssm.ps
Рендер глубины сцены (геометрии) с позиции позиции глобального источника света
*/

#include <../struct.h>
#include <../shadow.h>

//##########################################################################

sampler2D g_sColor:register(s0);

//##########################################################################

half4 main(VSO_SceneCommon IN):COLOR0
{
	//ShadowDepthAlphaTest(tex2D(g_sColor,IN.vTexUV));
	
	half fDepth = IN.vPos.z / IN.vPos.w;
	half fBias = ShadowSlopeBias(fDepth);
	
	return fDepth + fBias;
}