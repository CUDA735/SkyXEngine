
/*
sm_depth_green_cube.ps
Рендер глубины сцены (растительность) с позиции точечного источника света
*/

#include <../struct.h>
#include <../shadow.h>

//##########################################################################

sampler2D g_sColor:register(s0);

//##########################################################################

half4 main(VSO_SceneCommon IN):COLOR0
{ 
	ShadowDepthAlphaTest(tex2D(g_sColor,IN.vTexUV));
	
	half fDepth = length(IN.vPos);
	half fBias = ShadowSlopeBias(fDepth);
	
	return fDepth + fBias;
}