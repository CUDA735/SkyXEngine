
/*
ppe_bloom_bp.ps
Эффект bloom, первый проход - выявление светлых пикселей и их увеличение
*/

#include <../struct.h>

half3 Param;
//x - во сколько раз увеличиваем цвет пикселя
//y - минимальное значение цвета
//z - во сколько раз увеличиваем цвет пикселя если он прошел тест 

sampler2D BaseSampler:register(s0);

half4 main(vs_out_pp IN) : COLOR0
{
	half4 color = tex2D(BaseSampler, IN.TexUV);
	color.rgb *= Param.x;
	color.a = 1.f;
	[branch]if (color.r >= Param.y && color.g >= Param.y && color.b >= Param.y)
	{
		color.rgb *= Param.z;
		return color;
	}
	else
		return half4(0.0, 0.0, 0.0, 0.0);
}
