
/*
ppe_bloom_bp.ps
Эффект bloom, первый проход - выявление светлых пикселей и их увеличение
*/

#include <../struct.h>

//##########################################################################

half3 g_vParam;
//x - во сколько раз увеличиваем цвет пикселя
//y - минимальное значение цвета
//z - во сколько раз увеличиваем цвет пикселя если он прошел тест 

//##########################################################################

sampler2D g_sColor:register(s0);

//##########################################################################

half4 main(VSO_PP IN) : COLOR0
{
	half4 vColor = tex2D(g_sColor, IN.vTexUV);
	vColor.rgb *= g_vParam.x;
	vColor.a = 1.f;
	[branch]if (vColor.r >= g_vParam.y && vColor.g >= g_vParam.y && vColor.b >= g_vParam.y)
	{
		vColor.rgb *= g_vParam.z;
		return vColor;
	}
	else
		return half4(0.0, 0.0, 0.0, 0.0);
}
