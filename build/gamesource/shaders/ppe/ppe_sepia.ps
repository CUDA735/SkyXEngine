
/*
ppe_sepia.ps
Эффект "сепия" с учетом коэфициента
*/

#include <../struct.h>

half3 LightColor;
half3 DarkColor;;
half3 LumWeights;

half CountSepia;

sampler2D FrameSampler:register(s0);

half4 main(vs_out_pp IN):COLOR0
{
	half4 color = tex2D(FrameSampler,IN.TexUV);
	
	half lum = dot(LumWeights,color);
	half4 tmp_color = color;
	tmp_color.rgb = DarkColor*(1.f-lum) + LightColor*lum;
	tmp_color.rgb *= CountSepia * 2.f;
	color.rgb *= 1.f + (1.f - (CountSepia * 2.f));
	color += tmp_color;
	color /= 2.f;
	
	return color;
}