
/*
ppe_free_blur_3x3.ps
Размытие пикселя с учетом всех соседних пикселей, матрица 3 на 3
*/

#include <../struct.h>

half2 PixelSize;

sampler2D BlurMap:register(s0);

half4 main(vs_out_pp IN) : COLOR0
{
	half4 CountColor = tex2D(BlurMap,IN.TexUV);
	
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(-PixelSize.x,0.f)));
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(PixelSize.x,0.f)));
	
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(0.f,-PixelSize.y)));
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(0.f,PixelSize.y)));
	
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(-PixelSize.x,PixelSize.y)));
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(PixelSize.x,PixelSize.y)));
	
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(-PixelSize.x,-PixelSize.y)));
	CountColor += tex2D(BlurMap,half2(IN.TexUV + half2(PixelSize.x,-PixelSize.y)));
	
	CountColor *= 0.333f;

	return CountColor;
}